# 📝 **코딩 컨벤션 (Coding Convention)**

> **프로젝트명**: Memory Forest - AI 기반 치매 케어 인지 훈련 플랫폼
> 
> **작성일**: 2025.01.15
> 
> **작성자**: 기술 책임자

---

## 📋 1. 코딩 컨벤션 개요

### **1.1 목적**
- 코드의 가독성과 일관성 향상
- 팀 협업 효율성 증대
- 유지보수성 개선
- 코드 품질 표준화

### **1.2 적용 범위**
- Java (Spring Boot)
- JavaScript/TypeScript (React)
- Python (FastAPI)
- HTML/CSS
- SQL

---

## ☕ 2. Java 코딩 컨벤션

### **2.1 기본 규칙**

#### **파일 인코딩**
- **인코딩**: `UTF-8`
- **줄 구분자**: Unix 스타일 (`\n`)

#### **들여쓰기**
- **탭 사용 금지**: 스페이스 4칸 사용
- **한 줄 길이**: 최대 120자

#### **명명 규칙**
```java
// 클래스명: PascalCase
public class UserService { }

// 메서드명: camelCase
public void getUserInfo() { }

// 변수명: camelCase
private String userName;

// 상수명: UPPER_SNAKE_CASE
public static final int MAX_RETRY_COUNT = 3;

// 패키지명: 소문자
package com.bureung.memoryforest.user;
```

### **2.2 클래스 구조**

```java
public class UserService {
    // 1. 상수
    private static final String DEFAULT_ROLE = "USER";
    
    // 2. 필드
    private final UserRepository userRepository;
    private final PasswordEncoder passwordEncoder;
    
    // 3. 생성자
    public UserService(UserRepository userRepository, 
                      PasswordEncoder passwordEncoder) {
        this.userRepository = userRepository;
        this.passwordEncoder = passwordEncoder;
    }
    
    // 4. 메서드 (public -> protected -> private 순)
    public UserDto createUser(CreateUserRequest request) {
        validateUserRequest(request);
        User user = mapToUser(request);
        User savedUser = userRepository.save(user);
        return mapToUserDto(savedUser);
    }
    
    private void validateUserRequest(CreateUserRequest request) {
        if (request == null) {
            throw new IllegalArgumentException("Request cannot be null");
        }
        // ... validation logic
    }
}
```

### **2.3 Spring Boot 특화 규칙**

#### **Controller**
```java
@RestController
@RequestMapping("/api/v1/users")
@Validated
@Slf4j
public class UserController {
    
    private final UserService userService;
    
    public UserController(UserService userService) {
        this.userService = userService;
    }
    
    @PostMapping
    @ResponseStatus(HttpStatus.CREATED)
    public ResponseEntity<UserDto> createUser(
            @Valid @RequestBody CreateUserRequest request) {
        log.info("Creating user with email: {}", request.getEmail());
        UserDto user = userService.createUser(request);
        return ResponseEntity.created(URI.create("/api/v1/users/" + user.getId()))
                           .body(user);
    }
}
```

#### **Service**
```java
@Service
@Transactional(readOnly = true)
@Slf4j
public class UserService {
    
    private final UserRepository userRepository;
    private final PasswordEncoder passwordEncoder;
    
    public UserService(UserRepository userRepository, 
                      PasswordEncoder passwordEncoder) {
        this.userRepository = userRepository;
        this.passwordEncoder = passwordEncoder;
    }
    
    @Transactional
    public UserDto createUser(CreateUserRequest request) {
        log.debug("Creating user: {}", request.getEmail());
        
        if (userRepository.existsByEmail(request.getEmail())) {
            throw new UserAlreadyExistsException("Email already exists: " + request.getEmail());
        }
        
        User user = User.builder()
                       .email(request.getEmail())
                       .password(passwordEncoder.encode(request.getPassword()))
                       .name(request.getName())
                       .role(Role.USER)
                       .build();
        
        User savedUser = userRepository.save(user);
        log.info("User created successfully: {}", savedUser.getId());
        
        return UserDto.from(savedUser);
    }
}
```

#### **Repository**
```java
@Repository
public interface UserRepository extends JpaRepository<User, Long> {
    
    Optional<User> findByEmail(String email);
    
    boolean existsByEmail(String email);
    
    @Query("SELECT u FROM User u WHERE u.role = :role")
    List<User> findByRole(@Param("role") Role role);
    
    @Query("SELECT COUNT(u) FROM User u WHERE u.createdAt >= :startDate")
    long countByCreatedAtAfter(@Param("startDate") LocalDateTime startDate);
}
```

#### **Entity**
```java
@Entity
@Table(name = "users")
@Getter
@NoArgsConstructor(access = AccessLevel.PROTECTED)
@EqualsAndHashCode(of = "id")
@ToString(exclude = "password")
public class User {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(nullable = false, unique = true, length = 100)
    private String email;
    
    @Column(nullable = false, length = 100)
    private String password;
    
    @Column(nullable = false, length = 50)
    private String name;
    
    @Enumerated(EnumType.STRING)
    @Column(nullable = false, length = 20)
    private Role role;
    
    @Column(nullable = false)
    private LocalDateTime createdAt;
    
    @Column(nullable = false)
    private LocalDateTime updatedAt;
    
    @PrePersist
    protected void onCreate() {
        createdAt = LocalDateTime.now();
        updatedAt = LocalDateTime.now();
    }
    
    @PreUpdate
    protected void onUpdate() {
        updatedAt = LocalDateTime.now();
    }
    
    @Builder
    public User(String email, String password, String name, Role role) {
        this.email = email;
        this.password = password;
        this.name = name;
        this.role = role;
    }
}
```

#### **DTO**
```java
public record CreateUserRequest(
    @NotBlank(message = "이메일은 필수입니다")
    @Email(message = "올바른 이메일 형식이 아닙니다")
    String email,
    
    @NotBlank(message = "비밀번호는 필수입니다")
    @Size(min = 8, message = "비밀번호는 8자 이상이어야 합니다")
    String password,
    
    @NotBlank(message = "이름은 필수입니다")
    @Size(max = 50, message = "이름은 50자 이하여야 합니다")
    String name
) {}

public record UserDto(
    Long id,
    String email,
    String name,
    Role role,
    LocalDateTime createdAt
) {
    public static UserDto from(User user) {
        return new UserDto(
            user.getId(),
            user.getEmail(),
            user.getName(),
            user.getRole(),
            user.getCreatedAt()
        );
    }
}
```

### **2.4 예외 처리**

```java
@ControllerAdvice
@Slf4j
public class GlobalExceptionHandler {
    
    @ExceptionHandler(MethodArgumentNotValidException.class)
    public ResponseEntity<ErrorResponse> handleValidationException(
            MethodArgumentNotValidException e) {
        log.warn("Validation failed: {}", e.getMessage());
        
        List<String> errors = e.getBindingResult()
                              .getFieldErrors()
                              .stream()
                              .map(error -> error.getField() + ": " + error.getDefaultMessage())
                              .collect(Collectors.toList());
        
        ErrorResponse errorResponse = ErrorResponse.builder()
                                                 .timestamp(LocalDateTime.now())
                                                 .status(HttpStatus.BAD_REQUEST.value())
                                                 .message("Validation failed")
                                                 .errors(errors)
                                                 .build();
        
        return ResponseEntity.badRequest().body(errorResponse);
    }
    
    @ExceptionHandler(UserNotFoundException.class)
    public ResponseEntity<ErrorResponse> handleUserNotFoundException(
            UserNotFoundException e) {
        log.warn("User not found: {}", e.getMessage());
        
        ErrorResponse errorResponse = ErrorResponse.builder()
                                                 .timestamp(LocalDateTime.now())
                                                 .status(HttpStatus.NOT_FOUND.value())
                                                 .message(e.getMessage())
                                                 .build();
        
        return ResponseEntity.status(HttpStatus.NOT_FOUND).body(errorResponse);
    }
}
```

---

## ⚛️ 3. React (JavaScript/TypeScript) 코딩 컨벤션

### **3.1 기본 규칙**

#### **파일명**
- **컴포넌트**: PascalCase (예: `UserProfile.tsx`)
- **훅**: camelCase + `use` 접두사 (예: `useUserData.ts`)
- **유틸리티**: camelCase (예: `dateUtils.ts`)

#### **들여쓰기**
- **탭 사용 금지**: 스페이스 2칸 사용
- **한 줄 길이**: 최대 80자

### **3.2 컴포넌트 구조**

```tsx
import React, { useState, useEffect, useCallback } from 'react';
import { useQuery, useMutation } from 'react-query';
import styled from 'styled-components';

// Types
interface UserProfileProps {
  userId: string;
  onUpdate?: (user: User) => void;
}

interface User {
  id: string;
  name: string;
  email: string;
  avatar?: string;
}

// Styled Components
const ProfileContainer = styled.div`
  padding: 20px;
  border-radius: 8px;
  background-color: #ffffff;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
`;

const ProfileHeader = styled.div`
  display: flex;
  align-items: center;
  margin-bottom: 20px;
`;

// Component
export const UserProfile: React.FC<UserProfileProps> = ({ 
  userId, 
  onUpdate 
}) => {
  // State
  const [isEditing, setIsEditing] = useState(false);
  const [formData, setFormData] = useState<User | null>(null);
  
  // Queries
  const { data: user, isLoading, error } = useQuery(
    ['user', userId],
    () => fetchUser(userId),
    {
      onSuccess: (data) => setFormData(data),
    }
  );
  
  // Mutations
  const updateUserMutation = useMutation(
    (updatedUser: User) => updateUser(updatedUser),
    {
      onSuccess: (data) => {
        setIsEditing(false);
        onUpdate?.(data);
      },
    }
  );
  
  // Event Handlers
  const handleEdit = useCallback(() => {
    setIsEditing(true);
  }, []);
  
  const handleSave = useCallback(() => {
    if (formData) {
      updateUserMutation.mutate(formData);
    }
  }, [formData, updateUserMutation]);
  
  const handleCancel = useCallback(() => {
    setIsEditing(false);
    setFormData(user || null);
  }, [user]);
  
  // Effects
  useEffect(() => {
    if (user) {
      setFormData(user);
    }
  }, [user]);
  
  // Loading State
  if (isLoading) {
    return <div>Loading...</div>;
  }
  
  // Error State
  if (error) {
    return <div>Error: {error.message}</div>;
  }
  
  // Render
  return (
    <ProfileContainer>
      <ProfileHeader>
        <h2>User Profile</h2>
        {!isEditing && (
          <button onClick={handleEdit}>
            Edit
          </button>
        )}
      </ProfileHeader>
      
      {isEditing ? (
        <EditForm
          user={formData}
          onSave={handleSave}
          onCancel={handleCancel}
          onChange={setFormData}
        />
      ) : (
        <ProfileView user={user} />
      )}
    </ProfileContainer>
  );
};

// Default export
export default UserProfile;
```

### **3.3 훅 작성 규칙**

```tsx
import { useState, useEffect, useCallback, useMemo } from 'react';

export const useUserData = (userId: string) => {
  // State
  const [user, setUser] = useState<User | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<Error | null>(null);
  
  // Memoized values
  const isAdmin = useMemo(() => user?.role === 'ADMIN', [user?.role]);
  
  // API calls
  const fetchUser = useCallback(async () => {
    try {
      setLoading(true);
      const response = await fetch(`/api/users/${userId}`);
      
      if (!response.ok) {
        throw new Error('Failed to fetch user');
      }
      
      const userData = await response.json();
      setUser(userData);
    } catch (err) {
      setError(err instanceof Error ? err : new Error('Unknown error'));
    } finally {
      setLoading(false);
    }
  }, [userId]);
  
  // Effects
  useEffect(() => {
    fetchUser();
  }, [fetchUser]);
  
  // Return values
  return {
    user,
    loading,
    error,
    isAdmin,
    refetch: fetchUser,
  };
};
```

### **3.4 API 호출 규칙**

```tsx
// api/userApi.ts
import axios from 'axios';

const API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:8080';

const apiClient = axios.create({
  baseURL: API_BASE_URL,
  timeout: 10000,
  headers: {
    'Content-Type': 'application/json',
  },
});

// Request interceptor
apiClient.interceptors.request.use(
  (config) => {
    const token = localStorage.getItem('accessToken');
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
  },
  (error) => Promise.reject(error)
);

// Response interceptor
apiClient.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      localStorage.removeItem('accessToken');
      window.location.href = '/login';
    }
    return Promise.reject(error);
  }
);

export const userApi = {
  getUsers: () => apiClient.get('/api/users'),
  getUser: (id: string) => apiClient.get(`/api/users/${id}`),
  createUser: (userData: CreateUserRequest) => 
    apiClient.post('/api/users', userData),
  updateUser: (id: string, userData: UpdateUserRequest) => 
    apiClient.put(`/api/users/${id}`, userData),
  deleteUser: (id: string) => apiClient.delete(`/api/users/${id}`),
};
```

---

## 🐍 4. Python (FastAPI) 코딩 컨벤션

### **4.1 기본 규칙**

#### **파일 인코딩**
- **인코딩**: `UTF-8`
- **줄 구분자**: Unix 스타일 (`\n`)

#### **들여쓰기**
- **탭 사용 금지**: 스페이스 4칸 사용
- **한 줄 길이**: 최대 79자 (docstring은 72자)

#### **명명 규칙**
```python
# 클래스명: PascalCase
class UserService:
    pass

# 함수/변수명: snake_case
def get_user_info():
    user_name = "John"
    return user_name

# 상수명: UPPER_SNAKE_CASE
MAX_RETRY_COUNT = 3
DEFAULT_TIMEOUT = 30

# 모듈명: 소문자
# user_service.py
```

### **4.2 FastAPI 구조**

#### **메인 애플리케이션**
```python
# main.py
from fastapi import FastAPI, Depends
from fastapi.middleware.cors import CORSMiddleware
from contextlib import asynccontextmanager
import uvicorn

from app.core.config import settings
from app.core.database import init_db
from app.api.v1.api import api_router
from app.core.logging import setup_logging

@asynccontextmanager
async def lifespan(app: FastAPI):
    # Startup
    setup_logging()
    await init_db()
    yield
    # Shutdown
    pass

app = FastAPI(
    title=settings.PROJECT_NAME,
    version=settings.VERSION,
    description=settings.DESCRIPTION,
    lifespan=lifespan
)

# CORS 설정
app.add_middleware(
    CORSMiddleware,
    allow_origins=settings.ALLOWED_ORIGINS,
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# API 라우터 등록
app.include_router(api_router, prefix="/api/v1")

if __name__ == "__main__":
    uvicorn.run(
        "main:app",
        host="0.0.0.0",
        port=8000,
        reload=True
    )
```

#### **API 라우터**
```python
# app/api/v1/api.py
from fastapi import APIRouter
from app.api.v1.endpoints import users, games, contents, ai

api_router = APIRouter()

api_router.include_router(users.router, prefix="/users", tags=["users"])
api_router.include_router(games.router, prefix="/games", tags=["games"])
api_router.include_router(contents.router, prefix="/contents", tags=["contents"])
api_router.include_router(ai.router, prefix="/ai", tags=["ai"])
```

#### **엔드포인트**
```python
# app/api/v1/endpoints/users.py
from fastapi import APIRouter, Depends, HTTPException, status
from sqlalchemy.ext.asyncio import AsyncSession
from typing import List

from app.core.database import get_db
from app.core.auth import get_current_user
from app.schemas.user import UserCreate, UserUpdate, UserResponse
from app.services.user_service import UserService
from app.models.user import User

router = APIRouter()

@router.post("/", response_model=UserResponse, status_code=status.HTTP_201_CREATED)
async def create_user(
    user_data: UserCreate,
    db: AsyncSession = Depends(get_db)
) -> UserResponse:
    """
    새로운 사용자를 생성합니다.
    """
    user_service = UserService(db)
    user = await user_service.create_user(user_data)
    return UserResponse.from_orm(user)

@router.get("/me", response_model=UserResponse)
async def get_current_user_info(
    current_user: User = Depends(get_current_user)
) -> UserResponse:
    """
    현재 로그인한 사용자 정보를 조회합니다.
    """
    return UserResponse.from_orm(current_user)

@router.put("/me", response_model=UserResponse)
async def update_current_user(
    user_data: UserUpdate,
    current_user: User = Depends(get_current_user),
    db: AsyncSession = Depends(get_db)
) -> UserResponse:
    """
    현재 로그인한 사용자 정보를 수정합니다.
    """
    user_service = UserService(db)
    updated_user = await user_service.update_user(current_user.id, user_data)
    return UserResponse.from_orm(updated_user)
```

#### **서비스 레이어**
```python
# app/services/user_service.py
from sqlalchemy.ext.asyncio import AsyncSession
from sqlalchemy import select
from sqlalchemy.orm import selectinload
from typing import Optional, List

from app.models.user import User
from app.schemas.user import UserCreate, UserUpdate
from app.core.security import get_password_hash
from app.core.exceptions import UserNotFoundException

class UserService:
    def __init__(self, db: AsyncSession):
        self.db = db
    
    async def create_user(self, user_data: UserCreate) -> User:
        """
        새로운 사용자를 생성합니다.
        """
        # 이메일 중복 확인
        existing_user = await self.get_user_by_email(user_data.email)
        if existing_user:
            raise ValueError("Email already registered")
        
        # 사용자 생성
        hashed_password = get_password_hash(user_data.password)
        user = User(
            email=user_data.email,
            hashed_password=hashed_password,
            full_name=user_data.full_name,
            is_active=True
        )
        
        self.db.add(user)
        await self.db.commit()
        await self.db.refresh(user)
        
        return user
    
    async def get_user_by_email(self, email: str) -> Optional[User]:
        """
        이메일로 사용자를 조회합니다.
        """
        result = await self.db.execute(
            select(User).where(User.email == email)
        )
        return result.scalar_one_or_none()
    
    async def get_user_by_id(self, user_id: int) -> User:
        """
        ID로 사용자를 조회합니다.
        """
        result = await self.db.execute(
            select(User).where(User.id == user_id)
        )
        user = result.scalar_one_or_none()
        
        if not user:
            raise UserNotFoundException(f"User with id {user_id} not found")
        
        return user
    
    async def update_user(self, user_id: int, user_data: UserUpdate) -> User:
        """
        사용자 정보를 수정합니다.
        """
        user = await self.get_user_by_id(user_id)
        
        # 업데이트할 필드만 수정
        update_data = user_data.dict(exclude_unset=True)
        
        for field, value in update_data.items():
            if field == "password":
                value = get_password_hash(value)
            setattr(user, field, value)
        
        await self.db.commit()
        await self.db.refresh(user)
        
        return user
```

#### **스키마 (Pydantic)**
```python
# app/schemas/user.py
from pydantic import BaseModel, EmailStr, Field
from typing import Optional
from datetime import datetime

class UserBase(BaseModel):
    email: EmailStr = Field(..., description="사용자 이메일")
    full_name: str = Field(..., min_length=1, max_length=100, description="사용자 이름")
    is_active: bool = Field(default=True, description="계정 활성화 상태")

class UserCreate(UserBase):
    password: str = Field(..., min_length=8, description="비밀번호 (8자 이상)")

class UserUpdate(BaseModel):
    email: Optional[EmailStr] = Field(None, description="사용자 이메일")
    full_name: Optional[str] = Field(None, min_length=1, max_length=100, description="사용자 이름")
    password: Optional[str] = Field(None, min_length=8, description="비밀번호 (8자 이상)")

class UserResponse(UserBase):
    id: int = Field(..., description="사용자 ID")
    created_at: datetime = Field(..., description="생성일시")
    updated_at: datetime = Field(..., description="수정일시")
    
    class Config:
        from_attributes = True
        json_encoders = {
            datetime: lambda v: v.isoformat()
        }
```

---

## 🎨 5. HTML/CSS 코딩 컨벤션

### **5.1 HTML 규칙**

#### **기본 구조**
```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AI 기반 치매 케어 인지 훈련 플랫폼">
    <title>Memory Forest - 치매 케어 플랫폼</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="/css/main.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav">
            <div class="nav__container">
                <a href="/" class="nav__logo">
                    <img src="/images/logo.svg" alt="Memory Forest" class="nav__logo-img">
                </a>
                
                <ul class="nav__menu">
                    <li class="nav__item">
                        <a href="/games" class="nav__link">게임</a>
                    </li>
                    <li class="nav__item">
                        <a href="/progress" class="nav__link">진행도</a>
                    </li>
                    <li class="nav__item">
                        <a href="/profile" class="nav__link">프로필</a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>
    
    <!-- Main Content -->
    <main class="main">
        <section class="hero">
            <div class="hero__container">
                <h1 class="hero__title">AI 기반 치매 케어</h1>
                <p class="hero__description">
                    개인화된 인지 훈련으로 치매 예방과 치료를 도와드립니다
                </p>
                <a href="/games" class="btn btn--primary">게임 시작하기</a>
            </div>
        </section>
    </main>
    
    <!-- Footer -->
    <footer class="footer">
        <div class="footer__container">
            <p class="footer__copyright">
                &copy; 2025 Memory Forest. All rights reserved.
            </p>
        </div>
    </footer>
    
    <!-- JavaScript -->
    <script src="/js/main.js"></script>
</body>
</html>
```

### **5.2 CSS 규칙**

#### **BEM 방법론**
```css
/* Block */
.card {
    background-color: #ffffff;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    padding: 20px;
    margin-bottom: 20px;
}

/* Element */
.card__header {
    border-bottom: 1px solid #e0e0e0;
    margin-bottom: 15px;
    padding-bottom: 15px;
}

.card__title {
    font-size: 18px;
    font-weight: 600;
    color: #333333;
    margin: 0;
}

.card__content {
    color: #666666;
    line-height: 1.6;
}

/* Modifier */
.card--featured {
    border: 2px solid #007bff;
    background-color: #f8f9fa;
}

.card--featured .card__title {
    color: #007bff;
}

/* Responsive */
@media (max-width: 768px) {
    .card {
        padding: 15px;
        margin-bottom: 15px;
    }
    
    .card__title {
        font-size: 16px;
    }
}
```

#### **CSS 변수 사용**
```css
:root {
    /* Colors */
    --primary-color: #007bff;
    --secondary-color: #6c757d;
    --success-color: #28a745;
    --danger-color: #dc3545;
    --warning-color: #ffc107;
    --info-color: #17a2b8;
    
    /* Typography */
    --font-family-base: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
    --font-size-base: 16px;
    --line-height-base: 1.5;
    
    /* Spacing */
    --spacing-xs: 4px;
    --spacing-sm: 8px;
    --spacing-md: 16px;
    --spacing-lg: 24px;
    --spacing-xl: 32px;
    
    /* Border radius */
    --border-radius-sm: 4px;
    --border-radius-md: 8px;
    --border-radius-lg: 12px;
    
    /* Shadows */
    --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.1);
    --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.15);
    --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.2);
}

/* 사용 예시 */
.btn {
    font-family: var(--font-family-base);
    font-size: var(--font-size-base);
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--border-radius-md);
    box-shadow: var(--shadow-sm);
}

.btn--primary {
    background-color: var(--primary-color);
    color: #ffffff;
}
```

---

## 🗄️ 6. SQL 코딩 컨벤션

### **6.1 기본 규칙**

#### **명명 규칙**
```sql
-- 테이블명: snake_case, 복수형
CREATE TABLE users (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    email VARCHAR(100) NOT NULL UNIQUE,
    password_hash VARCHAR(255) NOT NULL,
    full_name VARCHAR(100) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- 인덱스명: idx_테이블명_컬럼명
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_created_at ON users(created_at);

-- 외래키명: fk_테이블명_참조테이블명
ALTER TABLE patients ADD CONSTRAINT fk_patients_user_id 
    FOREIGN KEY (user_id) REFERENCES users(id);
```

#### **쿼리 작성 규칙**
```sql
-- SELECT 문
SELECT 
    u.id,
    u.email,
    u.full_name,
    u.created_at,
    COUNT(p.id) AS patient_count
FROM users u
LEFT JOIN patients p ON u.id = p.user_id
WHERE u.is_active = TRUE
    AND u.created_at >= '2025-01-01'
GROUP BY u.id, u.email, u.full_name, u.created_at
HAVING COUNT(p.id) > 0
ORDER BY u.created_at DESC
LIMIT 10;

-- INSERT 문
INSERT INTO users (email, password_hash, full_name, role) 
VALUES 
    ('user1@example.com', 'hash1', '사용자1', 'USER'),
    ('user2@example.com', 'hash2', '사용자2', 'USER');

-- UPDATE 문
UPDATE users 
SET 
    full_name = '수정된 이름',
    updated_at = CURRENT_TIMESTAMP
WHERE id = 1;

-- DELETE 문 (실제 삭제 대신 soft delete 권장)
UPDATE users 
SET 
    is_active = FALSE,
    deleted_at = CURRENT_TIMESTAMP
WHERE id = 1;
```

---

## 📋 7. 코드 리뷰 체크리스트

### **7.1 일반적인 체크리스트**

- [ ] **코드 스타일**: 프로젝트 코딩 컨벤션을 준수하는가?
- [ ] **네이밍**: 변수, 함수, 클래스명이 명확하고 이해하기 쉬운가?
- [ ] **주석**: 복잡한 로직에 대한 적절한 주석이 있는가?
- [ ] **에러 처리**: 적절한 예외 처리가 되어 있는가?
- [ ] **성능**: 불필요한 연산이나 메모리 사용이 없는가?
- [ ] **보안**: 보안 취약점이 없는가?
- [ ] **테스트**: 적절한 테스트 코드가 작성되어 있는가?

### **7.2 언어별 체크리스트**

#### **Java**
- [ ] Lombok 어노테이션을 적절히 사용하는가?
- [ ] Optional을 사용하여 NPE를 방지하는가?
- [ ] Stream API를 적절히 활용하는가?
- [ ] 예외를 적절히 처리하는가?

#### **React**
- [ ] 컴포넌트를 적절히 분리했는가?
- [ ] 불필요한 리렌더링을 방지했는가?
- [ ] TypeScript 타입을 적절히 정의했는가?
- [ ] 에러 바운더리를 사용했는가?

#### **Python**
- [ ] 타입 힌트를 사용했는가?
- [ ] 가상환경을 사용했는가?
- [ ] 의존성을 requirements.txt에 명시했는가?
- [ ] PEP 8을 준수하는가?

---

## 🚀 8. 자동화 도구

### **8.1 Java**
```xml
<!-- checkstyle-maven-plugin -->
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-checkstyle-plugin</artifactId>
    <version>3.2.1</version>
    <configuration>
        <configLocation>checkstyle.xml</configLocation>
    </configuration>
</plugin>

<!-- spotbugs-maven-plugin -->
<plugin>
    <groupId>com.github.spotbugs</groupId>
    <artifactId>spotbugs-maven-plugin</artifactId>
    <version>4.7.3.0</version>
</plugin>
```

### **8.2 React**
```json
// .eslintrc.js
module.exports = {
  extends: [
    'eslint:recommended',
    'plugin:react/recommended',
    'plugin:@typescript-eslint/recommended',
    'prettier'
  ],
  plugins: ['react', '@typescript-eslint'],
  rules: {
    'react/prop-types': 'off',
    '@typescript-eslint/explicit-function-return-type': 'warn',
    '@typescript-eslint/no-unused-vars': 'error'
  }
};

// .prettierrc
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 80,
  "tabWidth": 2
}
```

### **8.3 Python**
```ini
# setup.cfg
[flake8]
max-line-length = 79
exclude = .git,__pycache__,build,dist
ignore = E203, W503

[mypy]
python_version = 3.10
warn_return_any = True
warn_unused_configs = True
```

---

**문서 정보**
- 작성일: 2025년 1월 15일
- 버전: v1.0
- 작성자: 기술 책임자
- 검토자: 개발팀장
- 승인자: CTO
